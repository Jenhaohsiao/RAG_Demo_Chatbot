# Phase 5 (US3) - RAG Query Response 使用者測試清單

**測試日期**: 2025-12-12  
**測試人員**: [您的名字]  
**專案**: Multilingual RAG-Powered Chatbot  
**Phase**: 5 - RAG Query Response (US3)

---

## 🚀 環境準備 ✅

### 服務狀態
- ✅ **後端伺服器**: http://localhost:8000
- ✅ **前端應用**: http://localhost:5173
- ✅ **Qdrant 向量數據庫**: localhost:6333 (Docker)
- ✅ **Gemini API**: 已設定 (models/text-embedding-004 + gemini-2.0-flash-exp)

### 所有系統已啟動，準備開始測試！

---

## 📋 使用者測試步驟

### 第一部分：基本功能測試 (15-20 分鐘)

#### **1️⃣ 建立新會話**
- [ ] 打開瀏覽器，進入 http://localhost:5173
- [ ] 應該看到 **「開始一個新對話」** 的歡迎畫面
- [ ] 點擊 **「開始」** 按鈕
- [ ] ✅ **期望結果**: 
  - 生成唯一的 Session ID
  - 顯示 **上傳檔案** 或 **貼上 URL** 的選項
  - 頁面右上角顯示 **語言選擇器** (EN/ZH/ES/JA/KO/AR/FR)

**記錄**: 
- Session ID: ________________
- 是否顯示上傳介面: [ ] 是 [ ] 否

---

#### **2️⃣ 測試語言切換 (多語言功能)**

**測試 A: 英文 → 中文**
- [ ] 在右上角點擊 **語言選擇器**
- [ ] 選擇 **中文 (ZH)**
- [ ] ✅ **期望結果**:
  - 所有文字立即切換為中文
  - "Start a conversation" → "開始一個新對話"
  - "Upload file" → "上傳檔案"
  - 頁面佈局保持不變
  - 無法重新加載頁面

**記錄**: 
- 中文翻譯完整度: [ ] 100% [ ] 95% [ ] 90% [ ] 其他 __%
- 是否有翻譯缺失: [ ] 是 [ ] 否 (如有，請描述: ___________________)

**測試 B: 中文 → 阿拉伯文 (RTL 測試)**
- [ ] 選擇 **阿拉伯文 (AR)**
- [ ] ✅ **期望結果**:
  - 頁面佈局從 **左到右** 轉換為 **右到左** (RTL)
  - 按鈕位置翻轉
  - 文字方向正確
  - 所有文字為阿拉伯文

**記錄**:
- RTL 佈局是否正確: [ ] 是 [ ] 否
- 按鈕位置是否翻轉: [ ] 是 [ ] 否
- 有無排版問題: [ ] 有 [ ] 無 (如有，請描述: ___________________)

**測試 C: 切換回英文**
- [ ] 選擇 **英文 (EN)**
- [ ] ✅ **期望結果**: 恢復英文佈局和 LTR 方向

**記錄**: 切換回英文成功: [ ] 是 [ ] 否

---

#### **3️⃣ 上傳文檔測試**

**準備**: 我們提供一個示例文本檔案 (機器學習相關內容)

**上傳檔案**:
- [ ] 點擊 **「上傳檔案」** 按鈕
- [ ] 選擇測試文件: `machine_learning_guide.txt`
- [ ] 檔案大小應該在 1-10 MB 之間
- [ ] ✅ **期望結果**:
  - 顯示 **「上傳進度條」** (0-100%)
  - 顯示當前處理階段:
    - [ ] Extract (提取文本)
    - [ ] Moderate (內容審核)
    - [ ] Chunk (文本分塊)
    - [ ] Embed (向量嵌入)
  - 完成後顯示 **「準備好進行對話」** 訊息

**記錄**:
- 上傳是否成功: [ ] 是 [ ] 否
- 處理時間: __________ 秒
- 分塊數量: __________
- 是否顯示進度條: [ ] 是 [ ] 否
- 是否完整顯示處理階段: [ ] 是 [ ] 否

---

### 第二部分：RAG 查詢功能測試 (20-30 分鐘)

#### **4️⃣ 基本查詢測試**

上傳完成後，切換到 **聊天介面**

**查詢 1: 文檔中有的內容**
- [ ] 在輸入框中輸入: **「What is machine learning?」** (或中文版本)
- [ ] 點擊 **「Send」** 或按 **Enter**
- [ ] ✅ **期望結果**:
  - 顯示 **「正在搜尋...」** 加載指示器
  - 3-5 秒後收到 **AI 回應**
  - 回應應該基於上傳的文檔內容
  - 顯示 **「ANSWERED」** 標籤 (綠色)
  - 顯示 **已檢索的分塊** (Retrieved Chunks)
  - 顯示 **Token 計數** (Input: X, Output: Y, Total: Z)

**記錄**:
- 是否收到回應: [ ] 是 [ ] 否
- 回應類型: [ ] ANSWERED (綠色) [ ] CANNOT_ANSWER (紅色) [ ] 其他
- 回應內容是否相關: [ ] 是 [ ] 否
- 是否顯示檢索信息: [ ] 是 [ ] 否
- Token 計數是否顯示: [ ] 是 [ ] 否

**查詢 2: 多輪對話**
- [ ] 輸入第二個查詢: **「Explain supervised learning」**
- [ ] ✅ **期望結果**:
  - 新回應添加到對話歷史
  - 顯示 **之前的查詢和回應**
  - 頁面自動滾動到最新訊息
  - Session 仍然有效

**記錄**:
- 是否支持多輪對話: [ ] 是 [ ] 否
- 對話歷史是否正確保存: [ ] 是 [ ] 否

---

#### **5️⃣ 無法回答的查詢測試**

**查詢 3: 文檔中沒有的內容**
- [ ] 輸入: **「What's the capital of France?」**
- [ ] ✅ **期望結果**:
  - 應該收到 **「CANNOT_ANSWER」** 回應 (紅色)
  - 訊息應該類似於: **「I don't have enough information in the provided documents to answer this question.」**
  - **不應該** 進行網絡搜索或猜測
  - Token 計數應為 0

**記錄**:
- 是否正確識別超出範圍的查詢: [ ] 是 [ ] 否
- 回應是否適當: [ ] 是 [ ] 否
- Token 計數是否為 0: [ ] 是 [ ] 否

**查詢 4: 另一個超出範圍的查詢**
- [ ] 輸入: **「Tell me a joke」**
- [ ] ✅ **期望結果**:
  - 同樣應該返回 **「CANNOT_ANSWER」**
  - 沒有生成的故事或笑話

**記錄**:
- 是否正確拒絕非相關查詢: [ ] 是 [ ] 否

---

#### **6️⃣ 查詢驗證和邊界測試**

**測試 A: 空查詢**
- [ ] 嘗試發送 **空訊息** (直接按 Enter)
- [ ] ✅ **期望結果**: 顯示 **錯誤訊息** 或 **驗證提示**

**記錄**: 是否正確處理: [ ] 是 [ ] 否

**測試 B: 極長查詢**
- [ ] 複製一大段文本 (2000+ 字元)
- [ ] 嘗試發送
- [ ] ✅ **期望結果**: 應該顯示 **「查詢過長」** 的錯誤訊息

**記錄**: 是否正確拒絕: [ ] 是 [ ] 否

**測試 C: 特殊字符**
- [ ] 輸入包含特殊字符的查詢: **「What is AI? (機器學習是什麼？)」**
- [ ] ✅ **期望結果**: 應該正常處理，不會導致崩潰

**記錄**: 是否正確處理: [ ] 是 [ ] 否

---

### 第三部分：聊天歷史和管理 (10-15 分鐘)

#### **7️⃣ 聊天歷史功能**

- [ ] 檢查左側或頁面上的 **「聊天歷史」** 面板
- [ ] 應該看到所有之前的查詢和回應
- [ ] ✅ **期望結果**:
  - 至少 4-5 條訊息記錄
  - 按時間順序排列
  - 區分 **用戶訊息** (右對齐) 和 **助理回應** (左對齊)
  - 顯示訊息時間戳
  - 可以向上滾動查看舊訊息

**記錄**:
- 歷史是否正確顯示: [ ] 是 [ ] 否
- 訊息數量: __________
- 是否支持滾動查看: [ ] 是 [ ] 否

---

#### **8️⃣ 清除歷史功能**

- [ ] 查找 **「清除歷史」** 或 **「新對話」** 按鈕
- [ ] 點擊該按鈕
- [ ] 確認操作 (如果有確認對話框)
- [ ] ✅ **期望結果**:
  - 聊天歷史被清空
  - 頁面恢復到 **空狀態**
  - 可以開始新對話
  - 可能會保留 Session ID (不關閉會話)

**記錄**:
- 是否成功清除: [ ] 是 [ ] 否
- 是否需要確認: [ ] 是 [ ] 否

---

#### **9️⃣ 關閉會話**

- [ ] 查找 **「離開」** 或 **「Close Session」** 按鈕
- [ ] 點擊該按鈕
- [ ] 確認操作
- [ ] ✅ **期望結果**:
  - 後端清理 Session 數據
  - Qdrant 中的向量集合被刪除
  - 聊天歷史被清空
  - 頁面可能返回歡迎畫面
  - 可以建立新的 Session

**記錄**:
- 是否成功關閉: [ ] 是 [ ] 否
- 新建會話是否工作: [ ] 是 [ ] 否

---

### 第四部分：多語言聊天測試 (10-15 分鐘)

#### **🔟 不同語言中進行查詢**

**準備新會話**:
- [ ] 建立新的 Session
- [ ] 上傳相同的文檔
- [ ] 在語言選擇器中選擇 **中文 (ZH)**

**查詢 (中文)**:
- [ ] 輸入: **「什麼是機器學習？」**
- [ ] ✅ **期望結果**:
  - 收到 **中文回應**
  - AI 應該用中文解釋
  - 相關性應該與英文版本相同

**記錄**:
- 是否支持中文查詢: [ ] 是 [ ] 否
- 中文回應質量: [ ] 很好 [ ] 良好 [ ] 一般 [ ] 較差
- 是否翻譯準確: [ ] 是 [ ] 否

**嘗試其他語言**:
- [ ] 選擇 **西班牙文 (ES)** 並輸入查詢
- [ ] ✅ **期望結果**: 收到西班牙文回應

**記錄**: 是否工作正常: [ ] 是 [ ] 否

---

### 第五部分：性能和穩定性測試 (15-20 分鐘)

#### **1️⃣1️⃣ 連續查詢測試**

快速進行 5-10 個連續查詢，測試系統穩定性：

- [ ] 查詢 1: "What is deep learning?"
- [ ] 查詢 2: "What is supervised learning?"
- [ ] 查詢 3: "What are CNNs?"
- [ ] 查詢 4: "Explain RNNs"
- [ ] 查詢 5: "What is NLP?"

**✅ 期望結果**:
- 所有查詢都應該成功
- 沒有超時或崩潰
- 回應時間應該一致 (3-5 秒)
- 系統應該保持響應

**記錄**:
- 是否所有查詢成功: [ ] 是 [ ] 否
- 是否有超時: [ ] 是 [ ] 否
- 平均回應時間: __________ 秒
- 是否有任何錯誤: [ ] 是 [ ] 否 (如有: _________________)
- 系統是否崩潰: [ ] 是 [ ] 否

---

#### **1️⃣2️⃣ 長時間運行測試**

讓系統運行 10-15 分鐘，監控穩定性：

- [ ] 繼續進行查詢
- [ ] 監控瀏覽器控制台 (F12) 查看錯誤
- [ ] 監控後端日誌
- [ ] ✅ **期望結果**: 
  - 無記憶體洩漏跡象
  - 沒有累積的錯誤
  - 系統保持穩定

**記錄**:
- 系統是否保持穩定: [ ] 是 [ ] 否
- 是否有性能下降: [ ] 是 [ ] 否
- 瀏覽器控制台是否有錯誤: [ ] 是 [ ] 否 (如有: _________________)

---

## 📊 測試結果總結

### 整體評分

| 功能 | 是否正常工作 | 評分 |
|------|----------|------|
| 會話管理 | [ ] ✅ [ ] ❌ | __/10 |
| 多語言支持 | [ ] ✅ [ ] ❌ | __/10 |
| 文檔上傳 | [ ] ✅ [ ] ❌ | __/10 |
| RAG 查詢 | [ ] ✅ [ ] ❌ | __/10 |
| 無法回答檢測 | [ ] ✅ [ ] ❌ | __/10 |
| 聊天歷史 | [ ] ✅ [ ] ❌ | __/10 |
| 用戶介面/UX | [ ] ✅ [ ] ❌ | __/10 |
| 性能/穩定性 | [ ] ✅ [ ] ❌ | __/10 |
| **總體** | **[ ] ✅ [ ] ❌** | **__/80** |

### 主要發現

**優點** (運作良好的功能):
1. _______________________________
2. _______________________________
3. _______________________________

**需要改進的地方**:
1. _______________________________
2. _______________________________
3. _______________________________

**發現的 Bug**:
1. _______________________________
2. _______________________________
3. _______________________________

---

## 📝 詳細注釋

### 未預期的行為或崩潰:

_________________________________________________________________

_________________________________________________________________

_________________________________________________________________

---

### 用戶體驗評論:

_________________________________________________________________

_________________________________________________________________

_________________________________________________________________

---

### 建議和反饋:

_________________________________________________________________

_________________________________________________________________

_________________________________________________________________

---

## 🎉 測試完成

**測試開始時間**: __:__ (AM/PM)  
**測試結束時間**: __:__ (AM/PM)  
**總測試時間**: __________ 分鐘  
**測試者簽名**: _______________________  
**日期**: _______________________

---

## 🔗 相關資源

- 📖 [PROGRESS.md](./PROGRESS.md) - 專案進度追蹤
- 📖 [快速開始指南](./QUICKSTART_INTEGRATED.md) - 整合測試指南
- 🐛 [已知問題](./PROGRESS.md#-technical-debt--known-issues) - 技術債務清單
- 📋 [測試結果](./test-results-phase3.md) - Phase 3 測試報告

**感謝您的測試！您的反饋對我們非常寶貴。**
